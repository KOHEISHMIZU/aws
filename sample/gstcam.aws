#!/bin/sh

nodisp=y
gst=h264dec.gst

for arg in $*
do
    case $prev_arg in
	"gst") gst=$arg;;
    esac
    case $arg in
	"nodisp") nodisp=y;;
    esac
    prev_arg=$arg
done

channel imgr img

curdir='pwd'

filter gstcam gstcam -i -o
fset gstcam ch_out img
fset gstcam width 1920 height 1080
fset gstcam fppl $curdir/h264dec.gst

if [ $nodisp != "y" ]; then
    filter glimv win -i img -o
    fset win width 1280 height 720
fi

cyc 0.033

go
